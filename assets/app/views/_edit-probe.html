<ng-form name="form">
  <div class="form-group">
    <label ng-attr-for="{{id}}-type" class="required">Type</label>
    <select
        ng-model="type"
        ng-attr-id="{{id}}-type"
        required
        class="form-control">
      <option value="httpGet">HTTP</option>
      <option value="exec">Container Command</option>
      <option value="tcpSocket">TCP Socket</option>
    </select>
  </div>
  <fieldset ng-if="type === 'httpGet'">
    <div class="form-group">
      <label ng-attr-for="{{id}}-path">Path</label>
      <div>
        <input
            ng-attr-id="{{id}}-path"
            ng-model="probe.httpGet.path"
            type="text"
            placeholder="/"
            autocorrect="off"
            autocapitalize="off"
            spellcheck="false"
            class="form-control">
      </div>
    </div>
    <div class="form-group">
      <label ng-attr-for="{{id}}-http-port" class="required">Port</label>
      <select
          id="{{id}}-http-port"
          ng-model="probe.httpGet.port"
          ng-options="port.containerPort as port.containerPort for port in tcpPorts"
          required
          class="form-control">
      </select>
      <div ng-if="!tcpPorts.length" class="has-error">
        <span class="help-block">Container has no TCP ports.</span>
      </div>
    </div>
  </fieldset>
  <fieldset ng-if="type === 'exec'">
    <label class="required">Command</label>
    <div class="form-group">
      <div ng-if="!probe.exec.command.length"><em>No command set.</em></div>
      <div ng-if="probe.exec.command.length">
        <span ng-repeat="arg in probe.exec.command" class="label label-default">
          {{arg}} <a href="">x</a>
        </span>
        <button ng-click="probe.exec.command = []" class="btn btn-link">Clear</button>
      </div>
    </div>
    <div class="form-group">
      <label class="sr-only" ng-attr-for="{{id}}-add-arg">Add Argument</label>
      <span class="input-group">
        <input
            type="text"
            ng-model="command.arg"
            ng-attr-id="{{id}}-add-arg"
            ng-required="!probe.exec.command.length"
            placeholder="Command Argument"
            class="form-control"
            autocorrect="off"
            autocapitalize="off"
            spellcheck="false">
        <span class="input-group-btn">
          <button class="btn btn-default" ng-click="addCommandArg()" ng-disabled="!command.arg">Add</button>
        </span>
      </span>
    </div>
  </fieldset>
  <fieldset ng-if="type === 'tcpSocket'">
    <div class="form-group">
      <label ng-attr-for="{{id}}-tcp-port" class="required">Port</label>
      <select
          id="{{id}}-tcp-port"
          ng-model="tcpSocket.port"
          ng-options="port.containerPort for port in exposedPorts"
          required
          class="form-control">
      </select>
    </div>
  </fieldset>
  <div class="form-group">
    <label ng-attr-for="{{id}}-initial-delay">Initial Delay</label>
    <span class="input-group">
      <input
          type="number"
          name="initialDelaySeconds"
          ng-model="probe.initialDelaySeconds"
          min="0"
          ng-attr-id="{{id}}-initial-delay"
          class="form-control"
          ng-attr-aria-describedby="{{id}}-delay-description">
      <span class="input-group-addon">seconds</span>
    </span>
    <div class="help-block" ng-attr-id="{{id}}-delay-description">
      How long to wait after the container starts to check health.
    </div>
    <div ng-if="form.initialDelaySeconds.$invalid && form.initialDelaySeconds.$touched" class="has-error">
      <div ng-if="form.initialDelaySeconds.$error.number" class="help-block">
        Must be a number.
      </div>
      <div ng-if="form.initialDelaySeconds.$error.min" class="help-block">
        Delay can't be negative.
      </div>
    </div>
  </div>
  <div class="form-group">
    <label ng-attr-for="{{id}}-timeout">Timeout</label>
    <span class="input-group"
       ng-class="{ 'has-error': form.timeoutSeconds.$invalid && form.timeoutSeconds.$touched }">
      <input
          type="number"
          name="timeoutSeconds"
          ng-modeal="probe.timeoutSeconds"
          min="0"
          placeholder="1"
          ng-attr-id="{{id}}-timeout"
          class="form-control"
          ng-attr-aria-describedby="{{id}}-timeout-description">
      <span class="input-group-addon">seconds</span>
    </span>
    <div class="help-block" ng-attr-id="{{id}}-timeout-description">
      How long to wait for the probe to finish. If the time is exceeded, the probe is considered failed.
    </div>
    <div ng-if="form.timeoutSeconds.$invalid && form.timeoutSeconds.$touched" class="has-error">
      <div ng-if="form.timeoutSeconds.$error.number" class="help-block">
        Must be a number.
      </div>
      <div ng-if="form.timeoutSeconds.$error.min" class="help-block">
        Timeout can't be negative.
      </div>
    </div>
  </div>
</ng-form>
